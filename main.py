
from machine import Pin, Timer
import ina219
import oled
import framebuf



import time



led = Pin(25, Pin.OUT)
battery = ina219.INA219(addr=0x43)
timer = Timer()
screen = oled.OLED_1inch3()
screen.flip()


template_nobutton=bytearray(b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x1e\x841\xc2\x0fa\x8c\xf0C\xf8!x\x00\xfb\xbf\x013\x84;\x02\x03a\x8c\xc0@\x18 \xcc\x00\xfb\xbf\x01\x03\x84?\x02\x03a\x8c\xc0@\x18 \x0c\x00\xfb\xbf\x01\x1e\x845\x02\x03a\x8d\xc0@x x\x00\xfb\xbf\x010\x841\x02\x03\xe1\x8f\xc0@\x18 \xc0\x00\xfb\xbf\x013\x841\x02\x03\xe1\x8e\xc0@\x18 \xcc\x00\xfb\xbf\x01\x1e\x841\x02\x03a\x8c\xc0@\x18 x\x00\xfb\xbe\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbc\xf9\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x1f\x0b\xba\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xeb\xb7\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xeb\xaf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xeb\xb7\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x0b\xba\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbc\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbe\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\xfd\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x7f\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbe\xfd\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x7f\xfb\xbe\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00{\xbd\x01\x00\x00\x00\x00\x00 \x00\x00\x00\x00\x0e\x00\x00;\xb9\xe1\x7f\x00\x00\x00\x80p\x00\x00\x00\x80?\x00\x00\xcb\xa7\xc1?\x00\x00\x00\x80Q\x00\x00\x00\x80 \x00\x00;\xb9\xf1\xff\x00\x00\x00\x80J\x00\x00\x00\x80 \x00\x00{\xbd\xc9?\x01\x00\x00\x80F\x02\x00\x00\x80 \x00\x00\xfb\xbe\xc9?\x01\x00\x00\x80 \x03\x00\x00\x80 \x00\x00\xfb\xbe\xc9?\x01\x00\x00\x80\xa4\x02\x00\x00\x80 \x00\x00\xfb\xbf\xf1\xff\x00\x00\x00@\xcc\x02\x00\x00\x80 \x00\x00\xfb\xbf\x81\x1f\x00\x00\x00@\x1e\x02\x00\x00\x80 \x00\x00\xfb\xbf\x01\x0f\x00\x00\x00@\x1e\x01\x00\x00\x80 \x00\x00\xfb\xbf\x01\x06\x00\x00\x00\xc0\x0c\x01\x00\x00\x80 \x00\x00\xfb\xbf\x01\x06\x00\x00\x00\x80\x80\x00\x00\x00\x80 \x00\x00\xfb\xbf\x01\x06\x00\x00\x00\x80a\x00\x00\x00\x80 \x00\x00\xfb\xbf\x81\x1f\x00\x00\x00\x003\x00\x00\x00\x80 \x00\x00\xfb\xbf\x81\x1f\x00\x00\x00\x00\x1e\x00\x00\x00\x80?\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff')
template_bottombutton=bytearray(b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x1e\x841\xc2\x0fa\x8c\xf0C\xf8!x\x00\xfb\xbf\x013\x84;\x02\x03a\x8c\xc0@\x18 \xcc\x00\xfb\xbf\x01\x03\x84?\x02\x03a\x8c\xc0@\x18 \x0c\x00\xfb\xbf\x01\x1e\x845\x02\x03a\x8d\xc0@x x\x00\xfb\xbf\x010\x841\x02\x03\xe1\x8f\xc0@\x18 \xc0\x00\xfb\xbf\x013\x841\x02\x03\xe1\x8e\xc0@\x18 \xcc\x00\xfb\xbf\x01\x1e\x841\x02\x03a\x8c\xc0@\x18 x\x00\xfb\xbe\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbc\xf9\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x1f\x0b\xba\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xeb\xb7\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xeb\xaf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xeb\xb7\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x0b\xba\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbc\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbe\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\xfd\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x7f\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x81\xfd\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x7f\x03\x81\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x83\x82\x01\x00\x00\x00\x00\x00 \x00\x00\x00\x00\x0e\x00\x00\xc3\x86\xe1\x7f\x00\x00\x00\x80p\x00\x00\x00\x80?\x00\x003\x98\xc1?\x00\x00\x00\x80Q\x00\x00\x00\x80 \x00\x00\xc3\x86\xf1\xff\x00\x00\x00\x80J\x00\x00\x00\x80 \x00\x00\x83\x82\xc9?\x01\x00\x00\x80F\x02\x00\x00\x80 \x00\x00\x03\x81\xc9?\x01\x00\x00\x80 \x03\x00\x00\x80 \x00\x00\x03\x81\xc9?\x01\x00\x00\x80\xa4\x02\x00\x00\x80 \x00\x00\x03\x80\xf1\xff\x00\x00\x00@\xcc\x02\x00\x00\x80 \x00\x00\x03\x80\x81\x1f\x00\x00\x00@\x1e\x02\x00\x00\x80 \x00\x00\x03\x80\x01\x0f\x00\x00\x00@\x1e\x01\x00\x00\x80 \x00\x00\x03\x80\x01\x06\x00\x00\x00\xc0\x0c\x01\x00\x00\x80 \x00\x00\x03\x80\x01\x06\x00\x00\x00\x80\x80\x00\x00\x00\x80 \x00\x00\x03\x80\x01\x06\x00\x00\x00\x80a\x00\x00\x00\x80 \x00\x00\x03\x80\x81\x1f\x00\x00\x00\x003\x00\x00\x00\x80 \x00\x00\x03\x80\x81\x1f\x00\x00\x00\x00\x1e\x00\x00\x00\x80?\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff')
template_topbutton=bytearray(b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x1e\x841\xc2\x0fa\x8c\xf0C\xf8!x\x00\x03\x80\x013\x84;\x02\x03a\x8c\xc0@\x18 \xcc\x00\x03\x80\x01\x03\x84?\x02\x03a\x8c\xc0@\x18 \x0c\x00\x03\x80\x01\x1e\x845\x02\x03a\x8d\xc0@x x\x00\x03\x80\x010\x841\x02\x03\xe1\x8f\xc0@\x18 \xc0\x00\x03\x80\x013\x841\x02\x03\xe1\x8e\xc0@\x18 \xcc\x00\x03\x80\x01\x1e\x841\x02\x03a\x8c\xc0@\x18 x\x00\x03\x81\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x83\xf9\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x1f\xf3\x85\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x13\x88\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x13\x90\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x13\x88\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xf3\x85\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x83\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x81\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\xfd\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x7f\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfb\xbe\xfd\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x7f\xfb\xbe\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00{\xbd\x01\x00\x00\x00\x00\x00 \x00\x00\x00\x00\x0e\x00\x00;\xb9\xe1\x7f\x00\x00\x00\x80p\x00\x00\x00\x80?\x00\x00\xcb\xa7\xc1?\x00\x00\x00\x80Q\x00\x00\x00\x80 \x00\x00;\xb9\xf1\xff\x00\x00\x00\x80J\x00\x00\x00\x80 \x00\x00{\xbd\xc9?\x01\x00\x00\x80F\x02\x00\x00\x80 \x00\x00\xfb\xbe\xc9?\x01\x00\x00\x80 \x03\x00\x00\x80 \x00\x00\xfb\xbe\xc9?\x01\x00\x00\x80\xa4\x02\x00\x00\x80 \x00\x00\xfb\xbf\xf1\xff\x00\x00\x00@\xcc\x02\x00\x00\x80 \x00\x00\xfb\xbf\x81\x1f\x00\x00\x00@\x1e\x02\x00\x00\x80 \x00\x00\xfb\xbf\x01\x0f\x00\x00\x00@\x1e\x01\x00\x00\x80 \x00\x00\xfb\xbf\x01\x06\x00\x00\x00\xc0\x0c\x01\x00\x00\x80 \x00\x00\xfb\xbf\x01\x06\x00\x00\x00\x80\x80\x00\x00\x00\x80 \x00\x00\xfb\xbf\x01\x06\x00\x00\x00\x80a\x00\x00\x00\x80 \x00\x00\xfb\xbf\x81\x1f\x00\x00\x00\x003\x00\x00\x00\x80 \x00\x00\xfb\xbf\x81\x1f\x00\x00\x00\x00\x1e\x00\x00\x00\x80?\x00\x00\xfb\xbf\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff')
template_bothbutton=bytearray(b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x1e\x841\xc2\x0fa\x8c\xf0C\xf8!x\x00\x03\x80\x013\x84;\x02\x03a\x8c\xc0@\x18 \xcc\x00\x03\x80\x01\x03\x84?\x02\x03a\x8c\xc0@\x18 \x0c\x00\x03\x80\x01\x1e\x845\x02\x03a\x8d\xc0@x x\x00\x03\x80\x010\x841\x02\x03\xe1\x8f\xc0@\x18 \xc0\x00\x03\x80\x013\x841\x02\x03\xe1\x8e\xc0@\x18 \xcc\x00\x03\x80\x01\x1e\x841\x02\x03a\x8c\xc0@\x18 x\x00\x03\x81\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x83\xf9\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x1f\xf3\x85\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x13\x88\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x13\x90\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x13\x88\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\xf3\x85\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x83\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x81\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x04\x00\x02\x00\x01\x80\x00@\x00 \x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\xfd\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x7f\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x81\xfd\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x7f\x03\x81\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x83\x82\x01\x00\x00\x00\x00\x00 \x00\x00\x00\x00\x0e\x00\x00\xc3\x86\xe1\x7f\x00\x00\x00\x80p\x00\x00\x00\x80?\x00\x003\x98\xc1?\x00\x00\x00\x80Q\x00\x00\x00\x80 \x00\x00\xc3\x86\xf1\xff\x00\x00\x00\x80J\x00\x00\x00\x80 \x00\x00\x83\x82\xc9?\x01\x00\x00\x80F\x02\x00\x00\x80 \x00\x00\x03\x81\xc9?\x01\x00\x00\x80 \x03\x00\x00\x80 \x00\x00\x03\x81\xc9?\x01\x00\x00\x80\xa4\x02\x00\x00\x80 \x00\x00\x03\x80\xf1\xff\x00\x00\x00@\xcc\x02\x00\x00\x80 \x00\x00\x03\x80\x81\x1f\x00\x00\x00@\x1e\x02\x00\x00\x80 \x00\x00\x03\x80\x01\x0f\x00\x00\x00@\x1e\x01\x00\x00\x80 \x00\x00\x03\x80\x01\x06\x00\x00\x00\xc0\x0c\x01\x00\x00\x80 \x00\x00\x03\x80\x01\x06\x00\x00\x00\x80\x80\x00\x00\x00\x80 \x00\x00\x03\x80\x01\x06\x00\x00\x00\x80a\x00\x00\x00\x80 \x00\x00\x03\x80\x81\x1f\x00\x00\x00\x003\x00\x00\x00\x80 \x00\x00\x03\x80\x81\x1f\x00\x00\x00\x00\x1e\x00\x00\x00\x80?\x00\x00\x03\x80\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff')

bestStreak=999
currentStreak=123

def getBatteryPct():
    bus_voltage = battery.getBusVoltage_V()
    pct = (bus_voltage -3)/1.2*100
    if(pct<0):pct=0
    elif(pct>100):pct=100
    return(pct)


def loadTemplateScreen(bottomPressed=False,topPressed=False):
    screen.fill(0x0000)
    if bottomPressed and topPressed:
        data=template_bothbutton
    elif bottomPressed:
        data=template_bottombutton
    elif topPressed:
        data=template_topbutton
    else:
        data=template_nobutton
    fbuf = framebuf.FrameBuffer(data,128,64,framebuf.MONO_HMSB)
    screen.blit(fbuf, 0, 0)
    screen.text("YogaExrRunHike",1,35,screen.white)

def loadBateryPct():
    screen.text(str(int(getBatteryPct())),95,51,screen.white)

def loadStreaks():
    screen.text(str(bestStreak),17,51,screen.white)
    screen.text(str(currentStreak),59,51,screen.white)


loadTemplateScreen()
loadBateryPct()
loadStreaks()
screen.show()

#screen.fill(0x0000)
#screen.text("M T W T F",12,12,screen.white)
#screen.text("S S S S S",12,20,screen.white)
# screen.pixel(0,0,1)
#screen.show()
#screen.buffer=bytearray([0]*1024)
#screen.show()
#screen.text("asdasdasd",10,10,screen.white)
#screen.show()
time.sleep(99999999)

def refreshScreen(timer):
    led.toggle()
    #if led.value():
    #    screen.fill(0x0000)
    #    screen.text("S M T W T F S",1,10,screen.white)
    #else:
    #    screen.fill(0x0000) 
    #    screen.show()
    #    screen.rect(0,0,128,64,screen.white)
    
    print("Percent:  {:6.1f} %".format(getBatteryPct()))
    #screen.text("{:6.1f}%".format(getBatteryPct()),10,10,screen.white)
    screen.fill(0x0000)
    screen.text("asdasdasd",10,10,screen.white)
    screen.show()

timer.init(freq=1.5, mode=Timer.PERIODIC, callback=refreshScreen)



